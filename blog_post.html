<!DOCTYPE html>
<html>
  <head>
    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>株式会社 TENGU</title>

    <meta
      name="keywords"
      content="Tengu, Sapporo, River, Himon, Bridge, Concrete"
    />
    <meta name="description" content="株式会社TENGUのホームページ" />
    <meta name="author" content="株式会社TENGU" />

    <!-- Favicon -->
    <link rel="shortcut icon" href="img/tengu_icon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="img/tengu_icon.ico" />

    <!-- Mobile Metas -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no"
    />

    <!-- Web Fonts  -->
    <link
      id="googleFonts"
      href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800%7CShadows+Into+Light&display=swap"
      rel="stylesheet"
      type="text/css"
    />

    <!-- Vendor CSS -->
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="vendor/fontawesome-free/css/all.min.css" />
    <link rel="stylesheet" href="vendor/animate/animate.compat.css" />
    <link
      rel="stylesheet"
      href="vendor/simple-line-icons/css/simple-line-icons.min.css"
    />
    <link
      rel="stylesheet"
      href="vendor/owl.carousel/assets/owl.carousel.min.css"
    />
    <link
      rel="stylesheet"
      href="vendor/owl.carousel/assets/owl.theme.default.min.css"
    />
    <link
      rel="stylesheet"
      href="vendor/magnific-popup/magnific-popup.min.css"
    />

    <!-- Theme CSS -->
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme-elements.css" />
    <link rel="stylesheet" href="css/theme-blog.css" />
    <link rel="stylesheet" href="css/theme-shop.css" />

    <!-- Demo CSS -->
    <link rel="stylesheet" href="css/demos/demo-construction.css" />

    <!-- Skin CSS -->
    <link
      id="skinCSS"
      rel="stylesheet"
      href="css/skins/skin-construction.css"
    />

    <!-- Theme Custom CSS -->
    <link rel="stylesheet" href="css/custom.css" />

    <!-- Head Libs -->
    <script src="vendor/modernizr/modernizr.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QPLR9V5E4L"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QPLR9V5E4L');
    </script>
  </head>
  <body
    class="loading-overlay-showing"
    data-loading-overlay
    data-plugin-options="{'hideDelay': 500, 'effect': 'cubes'}"
  >
    <div class="body">
      <header
        id="header"
        class="header-transparent header-semi-transparent header-semi-transparent-light"
        data-plugin-options="{'stickyEnabled': true, 'stickyEnableOnBoxed': true, 'stickyEnableOnMobile': false, 'stickyStartAt': 1, 'stickySetTop': '1'}"
      >
        <div class="header-body border-0">
          <div class="header-container container">
            <div class="header-row">
              <div class="header-column">
                <div class="header-row">
                  <div class="header-logo custom-header-logo">
                    <a href="index.html">
                      <img
                        class="logo"
                        alt="Porto"
                        width="190"
                        height="55"
                        src="img/logos/tengu_logo.png"
                      />
                    </a>
                    <a href="index.html">
                      <img
                        class="logo-sticky"
                        alt="Porto"
                        width="183"
                        height="48"
                        src="img/logos/tengu_logo_dark.png"
                      />
                    </a>
                  </div>
                </div>
              </div>
              <div class="header-column justify-content-end">
                <div class="header-row">
                  <div class="header-nav header-nav-links order-3 order-lg-1">
                    <div
                      class="header-nav-main header-nav-main-square header-nav-main-text-capitalize header-nav-main-effect-1 header-nav-main-sub-effect-1"
                    >
                      <nav class="collapse px-3-5">
                        <ul class="nav nav-pills" id="mainNav">
                          <li>
                            <a class="nav-link" href="index.html"> ホーム </a>
                          </li>
                          <li>
                            <a class="nav-link" href="company.html">
                              会社案内
                            </a>
                          </li>
                          <li class="dropdown">
                            <a
                              class="nav-link dropdown-toggle"
                              href="services.html"
                            >
                              業務案内
                            </a>
                            <ul class="dropdown-menu">
                              <li>
                                <a
                                  class="dropdown-item"
                                  href="services/kasen-kanri.html"
                                  >河川維持管理</a
                                >
                              </li>
                              <li>
                                <a
                                  class="dropdown-item"
                                  href="services/kasen-sousa.html"
                                  >河川施設操作</a
                                >
                              </li>
                              <li>
                                <a
                                  class="dropdown-item"
                                  href="services/doboku.html"
                                  >土木工事</a
                                >
                              </li>
                              <li>
                                <a
                                  class="dropdown-item"
                                  href="services/concrete.html"
                                  >コンクリート構造物補修設計</a
                                >
                              </li>
                              <li>
                                <a
                                  class="dropdown-item"
                                  href="services/bridge.html"
                                  >橋梁点検</a
                                >
                              </li>
                              <li>
                                <a
                                  class="dropdown-item"
                                  href="services/evaluation.html"
                                  >構造物詳細調査</a
                                >
                              </li>
                              <li>
                                <a
                                  class="dropdown-item"
                                  href="services/plan.html"
                                  >施工計画・数量計算</a
                                >
                              </li>
                            </ul>
                          </li>
                          <li>
                            <a class="nav-link" href="gallery.html">
                              事例ギャラリー
                            </a>
                          </li>
                          <li>
                            <a class="nav-link" href="recruit.html">
                              採用情報
                            </a>
                          </li>
                          <li>
                            <a class="nav-link" href="contact.html">
                              お問い合わせ
                            </a>
                          </li>
                        </ul>
                      </nav>
                    </div>
                    <button
                      class="btn header-btn-collapse-nav"
                      data-bs-toggle="collapse"
                      data-bs-target=".header-nav-main nav"
                    >
                      <i class="fas fa-bars"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>

      <div role="main" class="main">
        <section class="section section-height-3 border-0 m-0">
          <div class="container position-relative pt-5 pb-5-5 mt-5 mb-5">
            <div class="row justify-content-end pt-1 mt-lg-5">
              <div class="col-7 col-md-5 position-relative">
                <ul
                  class="breadcrumb d-block ps-2 appear-animation"
                  data-appear-animation="fadeInLeftShorterPlus"
                  data-appear-animation-delay="200"
                >
                  <li><a href="index.html">ホーム</a></li>
                  <li class="active">ブログ</li>
                </ul>
                <h1
                  class="position-absolute top-100 left-0 text-color-light font-weight-bold text-6 line-height-3 text-end mt-5-5"
                >
                  <span
                    class="d-block position-relative z-index-1 pb-5 ps-lg-3 appear-animation"
                    data-appear-animation="fadeInLeftShorterPlus"
                    data-appear-animation-delay="800"
                    >ブログ</span
                  >
                  <span
                    class="custom-svg-position-1 custom-svg-position-1-variation"
                  >
                    <svg
                      class="svg-fill-color-dark mt-1 appear-animation"
                      data-appear-animation="fadeInLeftShorterPlus"
                      data-appear-animation-delay="400"
                      xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink"
                      x="0px"
                      y="0px"
                      viewBox="0 0 859.45 88.44"
                      xml:space="preserve"
                      preserveAspectRatio="none"
                    >
                      <polyline
                        points="7.27,84.78 855.17,84.78 855.17,4.79 84.74,4.79 "
                      />
                    </svg>
                  </span>
                </h1>
              </div>
            </div>
          </div>
        </section>

        <div class="container mt-4">
            <div class="row">
              <div
                class="col-lg-12 order-lg-2 mt-0 appear-animation"
                data-appear-animation="fadeInUpShorterPlus"
                data-appear-animation-delay="1200"
              >
                <div class="row mb-4">
                  <div class="col-12">
                    <a
                      href="blog.html"
                      class="d-inline-block text-color-primary text-decoration-none appear-animation"
                      data-appear-animation="fadeInUpShorterPlus"
                      data-appear-animation-delay="500"
                    >
                      <i class="fas fa-chevron-left me-2"></i>一覧に戻る
                    </a>
                  </div>
                </div>
                <div id="blog-title-container" class="row">
                  <h2
                    class="text-color-dark font-weight-bold text-7 line-height-1 mb-4 mt-2 text-center" id="blog-title"
                  ></h2>
          
                  <table class="table table-bordered table-hover shadow-sm">
                    <thead class="bg-light">
                      <tr>
                        <th class="px-5 text-center">項目</th>
                        <th class="text-center">詳細</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th class="bg-light">日時：</th>
                        <td class="fw-bold" id="blog-date"></td>
                      </tr>
                      <tr>
                        <th class="bg-light">会場：</th>
                        <td class="fw-bold" id="blog-location"></td>
                      </tr>
                      <tr>
                        <th class="bg-light">住所：</th>
                        <td class="fw-bold" id="blog-address"></td>
                      </tr>
                      <tr>
                        <th class="bg-light">参加者：</th>
                        <td class="fw-bold" id="blog-participants"></td>
                      </tr>
                    </tbody>
                  </table>
          
                  <div class="row mt-4" id="blog-images"></div>
                </div>
          
                <!-- Stylized Bottom Text -->
                <div class="text-center p-4 mt-4 bg-light text-dark rounded shadow-sm">
                    <p class="text-5 fw-semibold" id="blog-description"></p>
                </div>
              </div>
            </div>
          

            <div class="col-lg-4 order-lg-1 position-relative">
              <!--  -->
            </div>
          </div>
        </div>
      </div>

      <div id="footer-placeholder"></div>
    </div>

    <!-- Load blog post -->

    <script>
        document.addEventListener("DOMContentLoaded", function () {
        const urlParams = new URLSearchParams(window.location.search);
        const blogId = urlParams.get("id");

        if (!blogId) {
            document.getElementById("blog-title-container").innerHTML = "<p>ブログが見つかりません。</p>";
            return;
        }

        fetch("blog/posts.json")
            .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json();
            })
            .then(posts => {
            let post = posts.find(p => p.id === blogId);

            if (!post) {
                document.getElementById("blog-title-container").innerHTML = "<p>ブログが見つかりません。</p>";
                return;
            }

            // Set the blog title
            document.getElementById("blog-title").textContent = post.title || "";
            
            // Determine post type (default to 'event' if not specified)
            const postType = post.type || (post.content ? 'article' : 'event');
            
            const contentContainer = document.getElementById("blog-title-container");
            
            if (postType === 'article') {
                // Article layout: Date (if available) + Content
                let articleHTML = '';
                
                // Add date if available
                if (post.date) {
                articleHTML += `<div class="text-center mb-4">
                    <p class="text-muted">${post.date}</p>
                </div>`;
                }
                
                // Add content
                if (post.content) {
                articleHTML += `<div class="mt-4">
                    <div class="text-4 article-content">${post.content}</div>
                </div>`;
                }
                
                // Replace the table with the article content
                const tableElement = contentContainer.querySelector("table.table");
                if (tableElement) {
                // Create a container for the article content
                const articleContainer = document.createElement("div");
                articleContainer.className = "article-container";
                articleContainer.innerHTML = articleHTML;
                
                // Replace table with article content
                tableElement.parentNode.replaceChild(articleContainer, tableElement);
                }
            } else {
                // Event layout: Table with details
                const tableBody = document.querySelector("table.table tbody");
                
                // Clear existing table rows
                tableBody.innerHTML = "";
                
                // Define the fields to display in the table and their labels
                const tableFields = [
                { key: "date", label: "日時" },
                { key: "location", label: "会場" },
                { key: "address", label: "住所" },
                { key: "participants", label: "参加者" },
                { key: "activity", label: "活動" }
                ];
                
                // Create table rows dynamically based on available data
                tableFields.forEach(field => {
                // Only create the row if the data exists
                if (post[field.key]) {
                    // Special case for date and day_time
                    let value = post[field.key];
                    if (field.key === "date" && post["day_time"]) {
                    value = `${post.date} ${post.day_time}`;
                    }
                    
                    const row = document.createElement("tr");
                    row.innerHTML = `
                    <th class="bg-light">${field.label}：</th>
                    <td class="fw-bold">${value}</td>
                    `;
                    tableBody.appendChild(row);
                }
                });
            }
            
            // Set the description if available
            const descriptionElement = document.getElementById("blog-description");
            if (descriptionElement) {
                if (post.description) {
                descriptionElement.textContent = post.description;
                descriptionElement.parentElement.style.display = "block";
                } else {
                // Hide the description container if there's no description
                descriptionElement.parentElement.style.display = "none";
                }
            }

            // Handle images
            let imagesContainer = document.getElementById("blog-images");
            
            if (post.images && Array.isArray(post.images) && post.images.length > 0) {
                imagesContainer.innerHTML = "";
                
                post.images.forEach((image, index) => {
                const colDiv = document.createElement("div");
                colDiv.className = post.images.length === 1 ? "col-md-6 mb-4 mx-auto text-center" : "col-md-6 mb-4";
                
                const imgElement = document.createElement("img");
                imgElement.src = image;
                imgElement.alt = `Blog Image ${index + 1}`;
                imgElement.className = "img-fluid rounded shadow-lg d-block mx-auto";
                
                imgElement.style.maxWidth = "100%";
                imgElement.style.height = "auto";
                
                colDiv.appendChild(imgElement);
                
                // Add caption if available
                if (post.captions && Array.isArray(post.captions) && post.captions[index]) {
                    const captionElement = document.createElement("p");
                    captionElement.className = "text-center mt-3 mb-0 text-4 font-weight-medium";
                    captionElement.textContent = post.captions[index];
                    colDiv.appendChild(captionElement);
                }
                
                imagesContainer.appendChild(colDiv);
                
                // Apply animations after a short delay
                setTimeout(() => {
                    colDiv.classList.add("appear-animation");
                    colDiv.dataset.appearAnimation = "fadeInUpShorterPlus";
                    colDiv.dataset.appearAnimationDelay = (1200 + (index * 100)).toString();
                }, 100);
                });
            } else {
                imagesContainer.innerHTML = '';
                // Don't show the empty message since some posts won't have images
            }
            })
            .catch(error => {
            document.getElementById("blog-title-container").innerHTML = 
                `<p class="text-danger">エラーが発生しました: ${error.message}</p>`;
            });
        });
      </script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
        setTimeout(() => {
            const imageContainer = document.getElementById("blog-images");
            if (!imageContainer) {
            return;
            }

            const imagePaths = [];
            const captions = [];
            document.querySelectorAll("#blog-images > div").forEach(div => {
            const img = div.querySelector('img');
            const caption = div.querySelector('p');
            if (img) {
                imagePaths.push(img.src);
                captions.push(caption ? caption.textContent : null);
            }
            });
            
            imageContainer.innerHTML = '';
            
            if (!imageContainer.classList.contains('row')) {
            imageContainer.classList.add('row');
            }

            imagePaths.forEach((path, index) => {
            
            const col = document.createElement('div');
            col.className = imagePaths.length === 1 ? 'col-md-6 mb-4 mx-auto text-center' : 'col-md-6 mb-4';
            
            const newImage = new Image();
            newImage.src = path + '?nocache=' + new Date().getTime();
            newImage.alt = `Blog Image ${index + 1}`;
            newImage.className = 'img-fluid rounded shadow-lg d-block mx-auto';
            newImage.style.maxWidth = '100%';
            newImage.style.border = '2px solid green';
            
            col.appendChild(newImage);
            
            // Add caption if it exists
            if (captions[index]) {
                const captionElement = document.createElement("p");
                captionElement.className = "text-center mt-3 mb-0 text-4 font-weight-medium";
                captionElement.textContent = captions[index];
                col.appendChild(captionElement);
            }
            
            imageContainer.appendChild(col);
            });
        }, 1500);
        });
    </script>

    <!-- Load footer -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        fetch("components/footer.html")
          .then((response) => response.text())
          .then((data) => {
            document.getElementById("footer-placeholder").innerHTML = data;
            document.getElementById("year").textContent =
              new Date().getFullYear();
          })
          .catch((error) => console.error("Error loading footer:", error));
      });
    </script>

    <!-- Vendor -->
    <script src="vendor/plugins/js/plugins.min.js"></script>

    <!-- Theme Base, Components and Settings -->
    <script src="js/theme.js"></script>

    <!-- Current Page Vendor and Views -->
    <script src="js/views/view.contact.js"></script>

    <!-- Theme Custom -->
    <script src="js/custom.js"></script>

    <!-- Theme Initialization Files -->
    <script src="js/theme.init.js"></script>
  </body>
  <script
    type="text/javascript"
    src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"
  ></script>
  <style>
    #blog-title-container table {
      width: 100%;
      table-layout: fixed !important;
    }

    #blog-title-container table th:first-child,
    #blog-title-container table td:first-child {
      width: 120px !important;
      white-space: nowrap;
    }

    #blog-title-container table th:nth-child(2),
    #blog-title-container table td:nth-child(2) {
      width: auto !important;
    }

    /* Image caption styling */
    #blog-images > div {
      display: flex;
      flex-direction: column;
    }

    #blog-images img {
      width: 100%;
      display: block;
    }

    #blog-images p {
      display: block;
      width: 100%;
      clear: both;
    }
  </style>
</html>
